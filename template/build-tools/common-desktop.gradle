
apply plugin: 'java-library'
apply plugin: 'application'

def vnId = rootProject.name
mainClassName = "nl.weeaboo.vn.desktop.DesktopLauncher"
applicationName = vnId

test {
    workingDir = vnRootDir
}

run {
    workingDir = vnRootDir
    args '--Pdebug=true'
    ignoreExitValue = true
}

tasks.register('runDesktop') {
    dependsOn run
}

eclipse {
    project {
        linkedResource name: 'assets', type: '2', location: 'PARENT-1-PROJECT_LOC/template'
    }
}

tasks.register('assembleNvl', Zip) {
    from vnResDir
    archiveName "${vnId}.nvl"
}
assembleDist.dependsOn assembleNvl

apply plugin: 'com.github.johnrengelman.shadow'

shadowJar {
   baseName = applicationName
   classifier = null
   version = null
}

apply from: "${buildToolsDir}/common-packr.gradle"

// Disable dist tasks from 'distribution'/'shadow' plugin (we use packr instead)
tasks.distZip.enabled = false
tasks.distTar.enabled = false
tasks.shadowDistZip.enabled = false
tasks.shadowDistTar.enabled = false

packr {
    resources {
        from(assembleNvl)
    }
}
